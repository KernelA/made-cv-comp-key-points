unzip:
  cmd: python ./unzip.py -c ./configs/prepare/unzip.yml
  deps:
  - path: ./configs/prepare/unzip.yml
    md5: ff03768450dac832b7dc882386ed2090
    size: 95
  - path: ./data/raw-data/made-cv-2021-contest-01-facial-landmarks.zip
    md5: f7d2134eb7b54aef3b56ae4cfc683ab7
    size: 2186362366
  - path: ./unzip.py
    md5: 6ee7df2f6decc987eb7a982248eb90d7
    size: 1903
  outs:
  - path: ./data/test-train/contest01_data
    md5: caec7946fd41a447a13aaf84f6486866.dir
    size: 2512026582
    nfiles: 80003
extract_train_emb:
  cmd: python ./compute_embeddings.py -c ./configs/extract_features/ext_features.yml
  deps:
  - path: ./compute_embeddings.py
    md5: 857e678215456c93188ada9be223a469
    size: 2612
  - path: ./configs/extract_features/ext_features.yml
    md5: e3a55327cccce292086c253b7d595495
    size: 87
  - path: ./data/test-train/contest01_data/train
    md5: 9ea72cf7aba685917ebb94c550aaccfe.dir
    size: 2090142348
    nfiles: 64001
  - path: ./face_landmarks
    md5: 33dc63720237dabfc91477737c41940c.dir
    size: 13766
    nfiles: 16
  outs:
  - path: ./data/features/train_emb.pickle
    md5: 5e14bb7ff2a970f44131e8ea71821ee5
    size: 262144163
download_data:
  cmd: gdown --id 19905pDRrnX5YMdw-mvDZadJdUuzh_w2e -O ./data/raw-data/made-cv-2021-contest-01-facial-landmarks.zip
  outs:
  - path: ./data/raw-data/made-cv-2021-contest-01-facial-landmarks.zip
    md5: f7d2134eb7b54aef3b56ae4cfc683ab7
    size: 2186362366
train:
  cmd: python ./main_train.py -c ./configs/train/train.yml
  deps:
  - path: ./configs/train/train.yml
    md5: 3438ffbccc2fac330dcd7e55a12fecaa
    size: 174
  - path: ./data/test-train/contest01_data/train
    md5: 9ea72cf7aba685917ebb94c550aaccfe.dir
    size: 2090142348
    nfiles: 64001
  - path: ./face_landmarks/
    md5: cfbd74d08817447c56bcffae40d2caf3.dir
    size: 33153
    nfiles: 22
  - path: ./main_train.py
    md5: eac7d3f67a9ea436a782b6c08050f89f
    size: 6344
  - path: ./model/
    md5: 3ebd9fc197e1182d53060fc88563f2fe.dir
    size: 2348
    nfiles: 4
  params:
    params.py:
      LossParams:
        w: 0.2
        eps: 2
        redcution: sum
      OptimizerParams:
        lr: 0.0001
        betas:
        - 0.9
        - 0.999
        eps: 1e-08
        weight_decay: 0
        amsgrad: true
      TrainParams:
        train_size: 0.8
        num_landmarks: 971
        dropout_prob: 0.25
        check_val_every_n_epoch: 2
        flush_logs_every_n_steps: 10
        precision: 16
        max_epochs: 50
        train_backbone: true
  outs:
  - path: ./exp/train
    md5: d751713988987e9331980363e24189ce.dir
    size: 0
    nfiles: 0
test-run:
  cmd: python ./main_train.py -c ./configs/train/train.yml --fast_dev_run --exp_dir
    ./exp/test_run --valid_batch_size 16 --train_batch_size 16
  deps:
  - path: ./configs/train/train.yml
    md5: 9f32a5bd1e4786af4d56f2581acd8fdd
    size: 218
  - path: ./data/test-train/contest01_data/train
    md5: 9ea72cf7aba685917ebb94c550aaccfe.dir
    size: 2090142348
    nfiles: 64001
  - path: ./face_landmarks/
    md5: d42bdcc609764ba7926338e08f85b491.dir
    size: 37507
    nfiles: 22
  - path: ./main_train.py
    md5: 47734f812ed48d2a223eb6830e2c7d8d
    size: 7726
  - path: ./model/
    md5: 3ebd9fc197e1182d53060fc88563f2fe.dir
    size: 2348
    nfiles: 4
  params:
    params.py:
      LossParams:
        w: 0.2
        eps: 2
        redcution: sum
      OptimizerParams:
        lr: 0.0001
        betas:
        - 0.9
        - 0.999
        eps: 1e-08
        weight_decay: 0
        amsgrad: true
      TrainParams:
        train_size: 0.85
        num_landmarks: 971
        dropout_prob: 0.2
        check_val_every_n_epoch: 5
        flush_logs_every_n_steps: 100
        precision: 16
        max_epochs: 50
        train_backbone: true
        img_size_in_batch:
        - 176
        - 228
  outs:
  - path: ./exp/test_run
    md5: d751713988987e9331980363e24189ce.dir
    size: 0
    nfiles: 0
prediction:
  cmd: python ./make_prediction.py -c ./configs/prediction/prediction.yml
  deps:
  - path: ./configs/prediction/prediction.yml
    md5: 00954a7e7035e0ede22683a1fb493fdf
    size: 201
  - path: ./make_prediction.py
    md5: 8322523afc1d34319efeb72b080399fd
    size: 4609
  params:
    params.py:
      TrainParams:
        train_size: 0.85
        num_landmarks: 971
        dropout_prob: 0.2
        check_val_every_n_epoch: 5
        flush_logs_every_n_steps: 100
        precision: 16
        max_epochs: 50
        train_backbone: true
        img_size_in_batch:
        - 176
        - 228
  outs:
  - path: ./resnet_subm.csv
    md5: 2ff00c727ab076ab040e3d2ba69a5380
    size: 3920062
fix_annot:
  cmd: python ./fix_faces.py -c ./configs/fix_annotation/fix_annotation.yml
  deps:
  - path: ./configs/fix_annotation/fix_annotation.yml
    md5: 8ce08c116d3ad9702cbf62a30ff56a27
    size: 58
  - path: ./data/test-train/contest01_data/train
    md5: 0d2903f115f14c30a8f87c6360b0925f.dir
    size: 2533747001
    nfiles: 64003
  - path: ./fix_faces.py
    md5: 005d3ff6eddbbf73269da423c2b32ed3
    size: 4918
